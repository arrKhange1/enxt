@let fwbDetailsConfig = reportFieldsConfig.fwbDetails;

<mat-table class="report-table" matSort (matSortChange)="sortChange($event)" [dataSource]="reportData()">
  <ng-container matColumnDef="prefix">
    <mat-header-cell  *matHeaderCellDef>{{ fwbDetailsConfig.prefix }}</mat-header-cell>
    <mat-cell *matCellDef="let fwbRow"> {{fwbRow.fWB_Details.AWB_Prefix}} </mat-cell>
  </ng-container>
  <ng-container matColumnDef="serial">
    <mat-header-cell  mat-sort-header *matHeaderCellDef>{{ fwbDetailsConfig.serial }}</mat-header-cell>
    <mat-cell  *matCellDef="let fwbRow"> {{fwbRow.fWB_Details.AWB_Serial}} </mat-cell>
  </ng-container>
  <ng-container matColumnDef="origin">
    <mat-header-cell  mat-sort-header *matHeaderCellDef>{{ fwbDetailsConfig.origin }}</mat-header-cell>
    <mat-cell  *matCellDef="let fwbRow"> {{fwbRow.fWB_Details.AWB_Origin}} </mat-cell>
  </ng-container>
  <ng-container matColumnDef="destination">
    <mat-header-cell  mat-sort-header *matHeaderCellDef>{{ fwbDetailsConfig.destination }}</mat-header-cell>
    <mat-cell  *matCellDef="let fwbRow"> {{fwbRow.fWB_Details.AWB_Destination}} </mat-cell>
  </ng-container>
  <ng-container matColumnDef="act_weight">
    <mat-header-cell  mat-sort-header *matHeaderCellDef>{{ fwbDetailsConfig.weight }}</mat-header-cell>
    <mat-cell  *matCellDef="let fwbRow"> {{fwbRow.fWB_Details.Weight_Actual}} </mat-cell>
  </ng-container>
  <ng-container matColumnDef="unit">
    <mat-header-cell mat-sort-header *matHeaderCellDef>{{ fwbDetailsConfig.weightId }}</mat-header-cell>
    <mat-cell  *matCellDef="let fwbRow"> {{fwbRow.fWB_Details.Weight_Identifier}} </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="columnsToDisplay"></mat-header-row>
  <mat-row
    class="report-table__row"
    (click)="expandRowContent(fwbRow)"
    [attr.data-agent]="fwbRow.agent_Details"
    *matRowDef="let fwbRow; columns: columnsToDisplay"
    [ngTemplateOutlet]="rowContent"
    [ngTemplateOutletContext]="{ $implicit: fwbRow }"
  >
  </mat-row>


  <ng-template #rowContent let-fwbRow>
    @if (expandedRow === fwbRow) {
      <div class="row__more-info">
        <mat-card class="row__more-info-card" appearance="outlined">
          <mat-card-header>
            <mat-card-title>FWB_Details</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <mat-list class="row__more-info-list" role="list">
              <mat-list-item class="row__more-info-item" role="listitem">
                <h3 matListItemTitle>Origin</h3>
                <span matListItemLine>{{ fwbRow.fWB_Details.AWB_Origin }}</span>
              </mat-list-item>

              <mat-list-item class="row__more-info-item" role="listitem">
                <h3 matListItemTitle>Destination</h3>
                <span matListItemLine>{{ fwbRow.fWB_Details.AWB_Destination }}</span>
              </mat-list-item>

              <mat-list-item class="row__more-info-item" role="listitem">
                <h3 matListItemTitle>Pieces</h3>
                <span matListItemLine>{{ fwbRow.fWB_Details.Pieces }}</span>
              </mat-list-item>

              <mat-list-item class="row__more-info-item" role="listitem">
                <h3 matListItemTitle>Actual Weight</h3>
                <span matListItemLine>{{ fwbRow.fWB_Details.Weight_Actual }}</span>
              </mat-list-item>

              <mat-list-item class="row__more-info-item" role="listitem">
                <h3 matListItemTitle>Unit</h3>
                <span matListItemLine>{{ fwbRow.fWB_Details.Weight_Identifier }}</span>
              </mat-list-item>

              <mat-list-item class="row__more-info-item" role="listitem">
                <h3 matListItemTitle>Volume</h3>
                <span matListItemLine>{{ fwbRow.fWB_Details.Volume }}</span>
              </mat-list-item>

              <mat-list-item class="row__more-info-item" role="listitem">
                <h3 matListItemTitle>Volume ID</h3>
                <span matListItemLine>{{ fwbRow.fWB_Details.Volume_Identifier }}</span>
              </mat-list-item>

              <mat-list-item class="row__more-info-item" role="listitem">
                <h3 matListItemTitle>Goods Description</h3>
                <span matListItemLine>{{ fwbRow.fWB_Details.Goods_Description }}</span>
              </mat-list-item>

            </mat-list>
          </mat-card-content>
        </mat-card>
      </div>
    }
  </ng-template>

</mat-table>
